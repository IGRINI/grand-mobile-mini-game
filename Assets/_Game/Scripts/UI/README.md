# UI Система здоровья

## Описание
Система отображения здоровья для машины и пассажиров с плавными анимациями.

## Компоненты

### Интерфейсы
- `IHealthUI` - базовый интерфейс для UI здоровья

### Классы
- `CharacterHealthUI` - компонент для отображения здоровья одного персонажа (с DOTween)
- `CharacterHealthUISimple` - простая версия без DOTween (только корутины)
- `TeamHealthUI` - контроллер для управления UI всей команды

## Использование

### Настройка UI персонажа
1. Создайте UI элемент с компонентом `CharacterHealthUI` или `CharacterHealthUISimple`
2. Настройте ссылки:
   - `healthBar` - Image с типом Filled для отображения полоски здоровья
   - `healthText` - TextMeshProUGUI для отображения цифр здоровья
   - `characterNameText` - TextMeshProUGUI для имени персонажа
3. Настройте параметры анимации:
   - `animationDuration` - длительность анимации (0.5 сек по умолчанию)
   - Кривые анимации для плавности

### Настройка UI команды
1. Создайте GameObject с компонентом `TeamHealthUI`
2. Настройте ссылки:
   - `carHealthUI` - UI здоровья машины
   - `passengerHealthUIs` - список UI для пассажиров
3. Система автоматически подписывается на события изменения здоровья

## Анимации

### CharacterHealthUI (с DOTween)
- **Полоска здоровья**: плавное изменение fillAmount с кривой OutQuart
- **Текст здоровья**: анимированное изменение цифр с кривой OutBack
- **Высокая производительность**: использует DOTween для оптимизации

### CharacterHealthUISimple (без DOTween)
- **Полоска здоровья**: корутина с AnimationCurve
- **Текст здоровья**: корутина с AnimationCurve
- **Совместимость**: работает без внешних зависимостей

## Особенности

### Автоматическое управление
- UI машины всегда отображается
- UI пассажиров показывается/скрывается динамически
- Событийное обновление значений здоровья (без Update)

### Плавные анимации
- Полоска здоровья плавно уменьшается/увеличивается
- Цифры здоровья анимированно изменяются
- Настраиваемые кривые анимации

### Производительность
- Событийное обновление только при изменении здоровья
- Нет постоянного опроса в Update
- Автоматическая подписка/отписка от событий
- Оптимизированные анимации
- Автоматическая очистка корутин/твинов

## Интеграция с системой здоровья

Система автоматически интегрируется с `IHealthService`:
```csharp
// Добавление пассажира
teamHealthUI.AddPassenger(passenger, "Имя пассажира");

// Удаление пассажира
teamHealthUI.RemovePassenger(passenger);
```

## Настройка в Unity

### Структура UI
```
Canvas
├── TeamHealthUI
│   ├── CarHealth (CharacterHealthUI)
│   │   ├── HealthBar (Image - Filled)
│   │   ├── HealthText (TextMeshProUGUI)
│   │   └── NameText (TextMeshProUGUI)
│   ├── Passenger1 (CharacterHealthUI)
│   ├── Passenger2 (CharacterHealthUI)
│   └── ...
```

### Настройки Image для полоски здоровья
- **Image Type**: Filled
- **Fill Method**: Horizontal
- **Fill Origin**: Left
- **Preserve Aspect**: false

Система готова к использованию и автоматически отображает здоровье всех зарегистрированных в `IHealthService` объектов. 